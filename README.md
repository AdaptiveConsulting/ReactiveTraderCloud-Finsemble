# rtc-finsemble

## Instructions

There are two ways of running this project:

- locally with the component URLs directed at your own RT @ localhost:3000
- or in through an OpenFin launcher (download link below)

### To run the project locally

1. Clone this project at the master branch.
2. Run `npm run start` on ReactiveTraderCloud
3. Run `npm run dev` on this project (this creates a clean build and starts the a server at port 3375)

### To build the project

Run `npm run build` for dev or `npm run build:prod` for prod

### Deployment

In this repo Github Pages is mapped to the `/docs` folder on the master branch. Running `npm run deploy` **after building the project for production** will re-generate the `/docs` folder copying into it:
- the contents of the `/dist` folder output by the build process
- the `/finsemble` folder output by the build process
- the contents of the `/public` folder. Any static files here will be served from the root of the Github Pages site

Then push to master to deploy the changes.

> Make sure the contents of the `/docs` folder are correct before pushing, it will override the production environment!

### Generate installers

To generate the installers, run `npm run createInstallers`. This will create an .exe installer on `{website URL}/install/` for each manifest specified (currently `dev` and `prod`)

Note that [the installers](https://openfin.co/documentation/options/#installer) are just a 
wrapper containing **the URL** to the manifest, (**not** the manifest file itself), so there's 
no need to re-generate an installer when making changes to the manifests - When the updated 
manifest files are merged to the corresponding branch, the installer will pick up the changes.

> Details
> 
> The installers in this directory are generated by using OpenFin's online service. This process consists on:
> 1. Sending an HTTP GET request to a given endpoint, providing the following parameters on the query string:
>   - `config`: A URL pointing to a manifest `.json` file for the OpenFin app
>   - `fileName`: without extension
> 2. The response to that request will be the `${fileName}.exe` installer file for Windows, containing the URL of the manifest, which will be retrieved every time the installer runs and used to bootstrap the application.
>
> The script in `/lib/createInstallers.js` automates this process, by constructing the URL of each manifest file and downloading each installer from the service.
